<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>고급 예산 관리 시스템</title>

    <link rel="stylesheet" href="../scripts/budget.css">

    <meta http-equiv="Content-Security-Policy"
          content="default-src 'self';
                   script-src 'self' https://cdn.jsdelivr.net 'unsafe-inline';
                   style-src 'self' 'unsafe-inline';
                   img-src 'self' data:;
                   connect-src 'self';">

    <script src="../scripts/chart.js"></script>

    <script src="../scripts/budget.js" defer></script>
</head>
<body>
    <div class="container">
        <h1>
            <span data-lang="ko" class="hidden">💰 고급 예산 관리 시스템</span>
            <span data-lang="en" class="hidden">💰 Advanced Budget Management System</span>
        </h1>
        <div class="lang-switcher">
            <button id="lang-ko" class="active">한국어</button>
            <button id="lang-en">English</button>
        </div>
        <p class="description">
            <span data-lang="ko" class="hidden">수입, 세금, 공제 및 지출을 입력하여 재정 상태를 파악하세요.</span>
            <span data-lang="en" class="hidden">Enter your income, taxes, deductions, and expenses to understand your financial health.</span>
        </p>

        <div class="dashboard">
            <div class="card">
                <h3 data-lang="ko" class="hidden">총 수입</h3>
                <h3 data-lang="en" class="hidden">Gross Income</h3>
                <p class="card-amount">$<span id="gross-income">0.00</span></p>
            </div>
            <div class="card">
                <h3 data-lang="ko" class="hidden">세전 공제</h3>
                <h3 data-lang="en" class="hidden">Pre-Tax Deductions</h3>
                <p class="card-amount">$<span id="pre-tax-deductions">0.00</span></p>
            </div>
            <div class="card">
                <h3 data-lang="ko" class="hidden">과세 소득</h3>
                <h3 data-lang="en" class="hidden">Taxable Income</h3>
                <p class="card-amount">$<span id="taxable-income">0.00</span></p>
            </div>
            <div class="card">
                <h3 data-lang="ko" class="hidden">총 세금</h3>
                <h3 data-lang="en" class="hidden">Total Taxes</h3>
                <p class="card-amount">$<span id="tax-total">0.00</span></p>
            </div>
            <div class="card">
                <h3 data-lang="ko" class="hidden">세후 공제</h3>
                <h3 data-lang="en" class="hidden">Post-Tax Deductions</h3>
                <p class="card-amount">$<span id="post-tax-deductions">0.00</span></p>
            </div>
            <div class="card">
                <h3 data-lang="ko" class="hidden">총 공제 및 세금</h3>
                <h3 data-lang="en" class="hidden">Total Deductions & Taxes</h3>
                <p class="card-amount">$<span id="total-deductions-taxes">0.00</span></p>
            </div>
            <div class="card income-net">
                <h3 data-lang="ko" class="hidden">순수입 (Net Income)</h3>
                <h3 data-lang="en" class="hidden">Net Income</h3>
                <p class="card-amount">$<span id="net-income">0.00</span></p>
            </div>
            <div class="card expense-total">
                <h3 data-lang="ko" class="hidden">총 지출</h3>
                <h3 data-lang="en" class="hidden">Total Expenses</h3>
                <p class="card-amount">$<span id="expenses-total-card">0.00</span></p>
                <span class="percentage" id="expenses-percentage-card">0.0%</span>
            </div>
            <div class="card remaining-balance">
                <h3 data-lang="ko" class="hidden">남은 잔액</h3>
                <h3 data-lang="en" class="hidden">Remaining Balance</h3>
                <p class="card-amount" id="remaining-balance">$0.00</p>
                <span class="percentage" id="remaining-percentage-card">0.0%</span>
            </div>
        </div>

        <div class="chart-section">
            <div class="chart-card">
                <h3 data-lang="ko" class="hidden">수입 흐름</h3>
                <h3 data-lang="en" class="hidden">Income Flow</h3>
                <canvas id="incomeFlowChart"></canvas>
            </div>
            <div class="chart-card">
                <h3 data-lang="ko" class="hidden">지출 카테고리</h3>
                <h3 data-lang="en" class="hidden">Expense Categories</h3>
                <canvas id="expenseCategoryChart"></canvas>
            </div>
        </div>

        <div class="input-sections">
            <div class="input-card">
                <h2 data-lang="ko" class="hidden">1. 수입</h2>
                <h2 data-lang="en" class="hidden">1. Income</h2>
                <label for="income-input">
                    <span data-lang="ko" class="hidden">월 수입 ($):</span>
                    <span data-lang="en" class="hidden">Monthly Income ($):</span>
                </label>
                <input type="number" id="income-input" value="0" min="0" placeholder="0">
            </div>

            <div class="input-card">
                <h2 data-lang="ko" class="hidden">2. 직원 세금</h2>
                <h2 data-lang="en" class="hidden">2. Employee Taxes</h2>
                <label for="tax-type-select">
                    <span data-lang="ko" class="hidden">세금 유형:</span>
                    <span data-lang="en" class="hidden">Select tax type:</span>
                </label>
                <select id="tax-type-select">
                    </select>
                <div id="tax-custom-container" class="hidden custom-input-group">
                    <input type="text" id="tax-custom-name-input" data-lang-ko-placeholder="직접 입력 (예: 지방세)" data-lang-en-placeholder="Custom name (e.g. Local Tax)" placeholder="Custom name">
                </div>
                <input type="number" id="tax-amount-input" min="0" data-lang-ko-placeholder="금액" data-lang-en-placeholder="Amount" placeholder="Amount">
                <button onclick="addCategorizedItem('taxes', document.getElementById('tax-type-select').value === 'custom')" class="btn-add">
                    <span data-lang="ko" class="hidden">세금 추가</span>
                    <span data-lang="en" class="hidden">Add Tax</span>
                </button>

                <div id="tax-list" class="item-list hidden">
                    </div>
            </div>

            <div class="input-card">
                <h2 data-lang="ko" class="hidden">3. 세전 공제</h2>
                <h2 data-lang="en" class="hidden">3. Pre-Tax Deductions</h2>
                <label for="pre-tax-type-select">
                    <span data-lang="ko" class="hidden">공제 유형:</span>
                    <span data-lang="en" class="hidden">Select deduction type:</span>
                </label>
                <select id="pre-tax-type-select">
                    </select>
                <div id="pre-tax-custom-container" class="hidden custom-input-group">
                    <input type="text" id="pre-tax-custom-name-input" data-lang-ko-placeholder="직접 입력 (예: HSA)" data-lang-en-placeholder="Custom name (e.g. HSA)" placeholder="Custom name">
                </div>
                <input type="number" id="pre-tax-amount-input" min="0" data-lang-ko-placeholder="금액" data-lang-en-placeholder="Amount" placeholder="Amount">
                <button onclick="addCategorizedItem('preTax', document.getElementById('pre-tax-type-select').value === 'custom')" class="btn-add">
                    <span data-lang="ko" class="hidden">세전 공제 추가</span>
                    <span data-lang="en" class="hidden">Add Pre-Tax Deduction</span>
                </button>

                <div id="pre-tax-list" class="item-list hidden">
                    </div>
            </div>

            <div class="input-card">
                <h2 data-lang="ko" class="hidden">4. 세후 공제</h2>
                <h2 data-lang="en" class="hidden">4. Post-Tax Deductions</h2>
                <label for="post-tax-type-select">
                    <span data-lang="ko" class="hidden">공제 유형:</span>
                    <span data-lang="en" class="hidden">Select deduction type:</span>
                </label>
                <select id="post-tax-type-select">
                    </select>
                <div id="post-tax-custom-container" class="hidden custom-input-group">
                    <input type="text" id="post-tax-custom-name-input" data-lang-ko-placeholder="직접 입력 (예: 주택 담보 대출)" data-lang-en-placeholder="Custom name (e.g. Mortgage)" placeholder="Custom name">
                </div>
                <input type="number" id="post-tax-amount-input" min="0" data-lang-ko-placeholder="금액" data-lang-en-placeholder="Amount" placeholder="Amount">
                <button onclick="addCategorizedItem('postTax', document.getElementById('post-tax-type-select').value === 'custom')" class="btn-add">
                    <span data-lang="ko" class="hidden">세후 공제 추가</span>
                    <span data-lang="en" class="hidden">Add Post-Tax Deduction</span>
                </button>

                <div id="post-tax-list" class="item-list hidden">
                    </div>
            </div>

            <div class="input-card">
                <h2 data-lang="ko" class="hidden">5. 지출</h2>
                <h2 data-lang="en" class="hidden">5. Expenses</h2>
                <label for="category-select">
                    <span data-lang="ko" class="hidden">카테고리:</span>
                    <span data-lang="en" class="hidden">Category:</span>
                </label>
                <select id="category-select">
                    </select>
                <div id="category-input-container" class="hidden custom-input-group">
                    <input type="text" id="new-category-input" data-lang-ko-placeholder="새 카테고리 이름" data-lang-en-placeholder="New category name" placeholder="New category name">
                    <button onclick="addCategory()" class="btn-add-inline">
                        <span data-lang="ko" class="hidden">추가</span>
                        <span data-lang="en" class="hidden">Add</span>
                    </button>
                </div>
                <input type="text" id="expense-name-input" data-lang-ko-placeholder="지출 항목명" data-lang-en-placeholder="Expense name" placeholder="Expense name">
                <input type="number" id="expense-amount-input-main" min="0" data-lang-ko-placeholder="금액" data-lang-en-placeholder="Amount" placeholder="Amount">
                <button onclick="addExpense()" class="btn-add">
                    <span data-lang="ko" class="hidden">지출 추가</span>
                    <span data-lang="en" class="hidden">Add Expense</span>
                </button>

                <div id="expenses-list" class="item-list hidden">
                    </div>
            </div>
        </div>

        <div class="action-buttons">
            <button onclick="saveData()" class="btn-action btn-save">
                <span data-lang="ko" class="hidden">데이터 저장</span>
                <span data-lang="en" class="hidden">Save Data</span>
            </button>
            <button onclick="resetData()" class="btn-action btn-reset">
                <span data-lang="ko" class="hidden">모든 데이터 초기화</span>
                <span data-lang="en" class="hidden">Reset All Data</span>
            </button>
        </div>
    </div>
</body>
</html>
