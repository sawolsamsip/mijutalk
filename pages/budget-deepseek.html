<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'; img-src 'self' data:; font-src 'self'; connect-src 'self';">
    <title>ë‹¤êµ­ì–´ ì˜ˆì‚° ê´€ë¦¬ ì‹œìŠ¤í…œ</title>
    <link rel="stylesheet" href="../scripts/budget.css">
</head>
<body>
    <div class="container">
        <div class="language-switcher">
            <button id="lang-ko" class="language-btn active">í•œêµ­ì–´</button>
            <button id="lang-en" class="language-btn">English</button>
        </div>
        <header>
            <h1 data-lang="ko">ğŸ’° ê³ ê¸‰ ì˜ˆì‚° ê´€ë¦¬ ì‹œìŠ¤í…œ</h1>
            <h1 data-lang="en" class="hidden">ğŸ’° Advanced Budget Management System</h1>
            <p data-lang="ko">í•œ ê³³ì—ì„œ ìˆ˜ì…, ì„¸ê¸ˆ, ê³µì œ ë° ì§€ì¶œì„ ê´€ë¦¬í•˜ì„¸ìš”</p>
            <p data-lang="en" class="hidden">Manage your income, taxes, deductions, and expenses in one place</p>
        </header>

        <div class="card">
            <h2 data-lang="ko">1. ìˆ˜ì…</h2>
            <h2 data-lang="en" class="hidden">1. Earnings</h2>
            <div class="form-group">
                <label for="income-input" data-lang="ko">ì›” ì´ ìˆ˜ì… ($)</label>
                <label for="income-input" data-lang="en" class="hidden">Gross Monthly Income ($)</label>
                <input type="number" id="income-input" data-lang-ko-placeholder="ì›” ì´ ìˆ˜ì…ì„ ì…ë ¥í•˜ì„¸ìš”" data-lang-en-placeholder="Enter your gross income" placeholder="0">
            </div>
        </div>

        <div class="card">
            <h2 data-lang="ko">2. ì§ì› ì„¸ê¸ˆ</h2>
            <h2 data-lang="en" class="hidden">2. Employee Taxes</h2>
            <div class="form-group">
                <label for="tax-type-select" data-lang="ko">ì„¸ê¸ˆ ìœ í˜•</label>
                <label for="tax-type-select" data-lang="en" class="hidden">Tax Type</label>
                <select id="tax-type-select">
                    <option value="" disabled selected data-lang="ko">ì„¸ê¸ˆ ìœ í˜• ì„ íƒ</option>
                    <option value="" disabled selected data-lang="en" class="hidden">Select tax type</option>
                    <option value="Federal Withholding">Federal Withholding</option>
                    <option value="State Tax (CA)">State Tax (CA)</option>
                    <option value="OASDI (Social Security)">OASDI (Social Security)</option>
                    <option value="Medicare">Medicare</option>
                    <option value="CA SDI">CA SDI</option>
                    <option value="custom" data-lang="ko">ì‚¬ìš©ì ì •ì˜ ì„¸ê¸ˆ</option>
                    <option value="custom" data-lang="en" class="hidden">Custom Tax</option>
                </select>
            </div>
            <div id="tax-custom-container" class="form-group hidden">
                <div class="flex">
                    <div>
                        <label for="tax-custom-name-input" data-lang="ko">ì„¸ê¸ˆ ì´ë¦„</label>
                        <label for="tax-custom-name-input" data-lang="en" class="hidden">Tax Name</label>
                        <input type="text" id="tax-custom-name-input" data-lang-ko-placeholder="ì„¸ê¸ˆ ì´ë¦„ ì…ë ¥" data-lang-en-placeholder="Enter tax name">
                    </div>
                    <div>
                        <label for="tax-amount-input" data-lang="ko">ê¸ˆì•¡ ($)</label>
                        <label for="tax-amount-input" data-lang="en" class="hidden">Amount ($)</label>
                        <input type="number" id="tax-amount-input" placeholder="ê¸ˆì•¡ ì…ë ¥">
                    </div>
                    <div>
                        <button onclick="addCategorizedItem('taxes', true)" class="btn-success" data-lang="ko">ì„¸ê¸ˆ ì¶”ê°€</button>
                        <button onclick="addCategorizedItem('taxes', true)" class="btn-success hidden" data-lang="en">Add Tax</button>
                    </div>
                </div>
            </div>
            <div class="item-list hidden" id="tax-list"></div>
        </div>

        <div class="card">
            <h2 data-lang="ko">3. ì„¸ì „ ê³µì œ</h2>
            <h2 data-lang="en" class="hidden">3. Pre-Tax Deductions</h2>
            <div class="form-group">
                <label for="pre-tax-type-select" data-lang="ko">ê³µì œ ìœ í˜•</label>
                <label for="pre-tax-type-select" data-lang="en" class="hidden">Deduction Type</label>
                <select id="pre-tax-type-select">
                    <option value="" disabled selected data-lang="ko">ê³µì œ ìœ í˜• ì„ íƒ</option>
                    <option value="" disabled selected data-lang="en" class="hidden">Select deduction type</option>
                    <option value="401k Traditional">401k Traditional</option>
                    <option value="Medical Premium">Medical Premium</option>
                    <option value="Dental Premium">Dental Premium</option>
                    <option value="Vision Premium">Vision Premium</option>
                    <option value="MSEAP">MSEAP</option>
                    <option value="custom" data-lang="ko">ì‚¬ìš©ì ì •ì˜ ê³µì œ</option>
                    <option value="custom" data-lang="en" class="hidden">Custom Deduction</option>
                </select>
            </div>
            <div id="pre-tax-custom-container" class="form-group hidden">
                <div class="flex">
                    <div>
                        <label for="pre-tax-custom-name-input" data-lang="ko">ê³µì œ ì´ë¦„</label>
                        <label for="pre-tax-custom-name-input" data-lang="en" class="hidden">Deduction Name</label>
                        <input type="text" id="pre-tax-custom-name-input" data-lang-ko-placeholder="ê³µì œ ì´ë¦„ ì…ë ¥" data-lang-en-placeholder="Enter deduction name">
                    </div>
                    <div>
                        <label for="pre-tax-amount-input" data-lang="ko">ê¸ˆì•¡ ($)</label>
                        <label for="pre-tax-amount-input" data-lang="en" class="hidden">Amount ($)</label>
                        <input type="number" id="pre-tax-amount-input" placeholder="ê¸ˆì•¡ ì…ë ¥">
                    </div>
                    <div>
                        <button onclick="addCategorizedItem('preTax', true)" class="btn-success" data-lang="ko">ê³µì œ ì¶”ê°€</button>
                        <button onclick="addCategorizedItem('preTax', true)" class="btn-success hidden" data-lang="en">Add Deduction</button>
                    </div>
                </div>
            </div>
            <div class="item-list hidden" id="pre-tax-list"></div>
        </div>

        <div class="card">
            <h2 data-lang="ko">4. ì„¸í›„ ê³µì œ</h2>
            <h2 data-lang="en" class="hidden">4. Post-Tax Deductions</h2>
            <div class="form-group">
                <label for="post-tax-type-select" data-lang="ko">ê³µì œ ìœ í˜•</label>
                <label for="post-tax-type-select" data-lang="en" class="hidden">Deduction Type</label>
                <select id="post-tax-type-select">
                    <option value="" disabled selected data-lang="ko">ê³µì œ ìœ í˜• ì„ íƒ</option>
                    <option value="" disabled selected data-lang="en" class="hidden">Select deduction type</option>
                    <option value="401k Roth">401k Roth</option>
                    <option value="Stock Purchase Plan">Stock Purchase Plan</option>
                    <option value="Legal Services">Legal Services</option>
                    <option value="LTD">LTD</option>
                    <option value="AD&D">AD&D</option>
                    <option value="Accident Insurance">Accident Insurance</option>
                    <option value="Critical Illness">Critical Illness</option>
                    <option value="custom" data-lang="ko">ì‚¬ìš©ì ì •ì˜ ê³µì œ</option>
                    <option value="custom" data-lang="en" class="hidden">Custom Deduction</option>
                </select>
            </div>
            <div id="post-tax-custom-container" class="form-group hidden">
                <div class="flex">
                    <div>
                        <label for="post-tax-custom-name-input" data-lang="ko">ê³µì œ ì´ë¦„</label>
                        <label for="post-tax-custom-name-input" data-lang="en" class="hidden">Deduction Name</label>
                        <input type="text" id="post-tax-custom-name-input" data-lang-ko-placeholder="ê³µì œ ì´ë¦„ ì…ë ¥" data-lang-en-placeholder="Enter deduction name">
                    </div>
                    <div>
                        <label for="post-tax-amount-input" data-lang="ko">ê¸ˆì•¡ ($)</label>
                        <label for="post-tax-amount-input" data-lang="en" class="hidden">Amount ($)</label>
                        <input type="number" id="post-tax-amount-input" placeholder="ê¸ˆì•¡ ì…ë ¥">
                    </div>
                    <div>
                        <button onclick="addCategorizedItem('postTax', true)" class="btn-success" data-lang="ko">ê³µì œ ì¶”ê°€</button>
                        <button onclick="addCategorizedItem('postTax', true)" class="btn-success hidden" data-lang="en">Add Deduction</button>
                    </div>
                </div>
            </div>
            <div class="item-list hidden" id="post-tax-list"></div>
        </div>

        <div class="card">
            <h2 data-lang="ko">5. ì§€ì¶œ ê´€ë¦¬</h2>
            <h2 data-lang="en" class="hidden">5. Expense Management</h2>
            <div class="grid">
                <div class="form-group">
                    <label for="category-select" data-lang="ko">ì¹´í…Œê³ ë¦¬</label>
                    <label for="category-select" data-lang="en" class="hidden">Category</label>
                    <select id="category-select"></select>
                </div>
                <div class="form-group">
                    <label for="expense-name-input" data-lang="ko">ì§€ì¶œ í•­ëª©</label>
                    <label for="expense-name-input" data-lang="en" class="hidden">Expense Name</label>
                    <input type="text" id="expense-name-input" data-lang-ko-placeholder="ì˜ˆ: ì›”ì„¸" data-lang-en-placeholder="e.g. Rent">
                </div>
                <div class="form-group">
                    <label for="expense-amount-input-main" data-lang="ko">ê¸ˆì•¡ ($)</label>
                    <label for="expense-amount-input-main" data-lang="en" class="hidden">Amount ($)</label>
                    <input type="number" id="expense-amount-input-main" placeholder="ê¸ˆì•¡ ì…ë ¥">
                </div>
            </div>
            <div id="category-input-container" class="form-group hidden">
                <div class="flex">
                    <div>
                        <label for="new-category-input" data-lang="ko">ìƒˆ ì¹´í…Œê³ ë¦¬ ì´ë¦„</label>
                        <label for="new-category-input" data-lang="en" class="hidden">New Category Name</label>
                        <input type="text" id="new-category-input" data-lang-ko-placeholder="ìƒˆ ì¹´í…Œê³ ë¦¬ ì…ë ¥" data-lang-en-placeholder="Enter new category">
                    </div>
                    <div>
                        <button onclick="addCategory()" class="btn-info" data-lang="ko">ì¹´í…Œê³ ë¦¬ ì¶”ê°€</button>
                        <button onclick="addCategory()" class="btn-info hidden" data-lang="en">Add Category</button>
                    </div>
                </div>
            </div>
            <button onclick="addExpense()" class="btn-success" style="width: 100%; margin-top: 10px;" data-lang="ko">ì§€ì¶œ ì¶”ê°€</button>
            <button onclick="addExpense()" class="btn-success hidden" style="width: 100%; margin-top: 10px;" data-lang="en">Add Expense</button>
            <div class="item-list hidden" id="expenses-list"></div>
        </div>

        <div class="card">
            <h2 data-lang="ko">6. ì›”ë³„ ì¬ë¬´ í˜„í™©</h2>
            <h2 data-lang="en" class="hidden">6. Monthly Financial Status</h2>
            <div class="income-flow">
                <div class="flow-item">
                    <span data-lang="ko">ì›” ì´ ìˆ˜ì… (ì´ ìˆ˜ìµ)</span>
                    <span data-lang="en" class="hidden">Gross Monthly Income (Total Earnings)</span>
                    <span>$<span id="gross-income">0.00</span> <em data-lang="ko">(100.0%)</em><em data-lang="en" class="hidden">(100.0%)</em></span>
                </div>
                <div class="flow-arrow">â†“</div>
                <div class="flow-item highlighted">
                    <span data-lang="ko">ì„¸ì „ ê³µì œ</span>
                    <span data-lang="en" class="hidden">Pre-Tax Deductions</span>
                    <span>-$<span id="pre-tax-deductions">0.00</span> <em></em></span>
                </div>
                <div class="flow-arrow">â†“</div>
                <div class="flow-item">
                    <span data-lang="ko"><strong>ê³¼ì„¸ ì†Œë“</strong></span>
                    <span data-lang="en" class="hidden"><strong>Taxable Income</strong></span>
                    <span>$<span id="taxable-income">0.00</span> <em></em></span>
                </div>
                <div class="flow-arrow">â†“</div>
                <div class="flow-item highlighted">
                    <span data-lang="ko">ì„¸ê¸ˆ</span>
                    <span data-lang="en" class="hidden">Taxes</span>
                    <span>-$<span id="tax-total">0.00</span> <em></em></span>
                </div>
                <div class="flow-arrow">â†“</div>
                <div class="flow-item highlighted">
                    <span data-lang="ko">ì„¸í›„ ê³µì œ</span>
                    <span data-lang="en" class="hidden">Post-Tax Deductions</span>
                    <span>-$<span id="post-tax-deductions">0.00</span> <em></em></span>
                </div>
                <div class="flow-arrow">â†“</div>
                <div class="flow-item info">
                    <span data-lang="ko"><strong>ì´ ê³µì œ ë° ì„¸ê¸ˆ í•©ê³„</strong></span>
                    <span data-lang="en" class="hidden"><strong>Total Deductions & Taxes</strong></span>
                    <span>-$<span id="total-deductions-taxes">0.00</span> <em></em></span>
                </div>
                <div class="flow-arrow">â†“</div>
                <div class="flow-item result">
                    <span data-lang="ko"><strong>ìˆœìˆ˜ì… (ì‹¤ìˆ˜ë ¹ì•¡)</strong></span>
                    <span data-lang="en" class="hidden"><strong>Net Income (Take-Home Pay)</strong></span>
                    <span>$<span id="net-income">0.00</span> <em></em></span>
                </div>
            </div>

            <div class="summary-cards">
                <div class="summary-card">
                    <div class="card-label" data-lang="ko">ì´ ì§€ì¶œ</div>
                    <div class="card-label hidden" data-lang="en">Total Expenses</div>
                    <div class="card-amount negative">$<span id="expenses-total-card">0.00</span></div>
                    <div class="card-label" data-lang="ko">(ìˆœìˆ˜ì…ì—ì„œ ì‚¬ìš©ëœ ê¸ˆì•¡)</div>
                    <div class="card-label hidden" data-lang="en">(Amount used from net income)</div>
                    <div class="card-label"><span id="expenses-percentage-card">0.0%</span> <span data-lang="ko">of ì´ ìˆ˜ì…</span><span data-lang="en" class="hidden">of gross income</span></div>
                </div>
                <div class="summary-card">
                    <div class="card-label" data-lang="ko">ë‚¨ì€ ì”ì•¡</div>
                    <div class="card-label hidden" data-lang="en">Remaining Balance</div>
                    <div class="card-amount positive">$<span id="remaining-balance">0.00</span></div>
                    <div class="card-label" data-lang="ko">(ìˆœìˆ˜ì… - ì´ ì§€ì¶œ = ì €ì¶•)</div>
                    <div class="card-label hidden" data-lang="en">(Net Income - Expenses = Savings)</div>
                    <div class="card-label"><span id="remaining-percentage-card">0.0%</span> <span data-lang="ko">of ì´ ìˆ˜ì…</span><span data-lang="en" class="hidden">of gross income</span></div>
                </div>
            </div>
        </div>

        <div class="chart-container">
            <h2 data-lang="ko">7. ì¬ë¬´ ë¶„ì„ ì°¨íŠ¸</h2>
            <h2 data-lang="en" class="hidden">7. Financial Analysis Charts</h2>
            <div class="grid">
                <div>
                    <div class="chart-title" data-lang="ko">ìˆ˜ì… ë¶„ë°° (ì´ ìˆ˜ì… ëŒ€ë¹„ ë¹„ìœ¨)</div>
                    <div class="chart-title hidden" data-lang="en">Income Distribution (Percentage of Gross Income)</div>
                    <div class="chart-wrapper">
                        <canvas id="incomeFlowChart"></canvas>
                    </div>
                </div>
                <div>
                    <div class="chart-title" data-lang="ko">ì§€ì¶œ ì¹´í…Œê³ ë¦¬ (ì´ ì§€ì¶œ ëŒ€ë¹„ ë¹„ìœ¨)</div>
                    <div class="chart-title hidden" data-lang="en">Expense Categories (Percentage of Total Expenses)</div>
                    <div class="chart-wrapper">
                        <canvas id="expenseCategoryChart"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <div class="utility-buttons">
            <button onclick="saveData()" class="btn-info" data-lang="ko">ğŸ’¾ ë°ì´í„° ì €ì¥</button>
            <button onclick="saveData()" class="btn-info hidden" data-lang="en">ğŸ’¾ Save Data</button>
            <button onclick="loadData()" class="btn-info" data-lang="ko">ğŸ“‚ ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸°</button>
            <button onclick="loadData()" class="btn-info hidden" data-lang="en">ğŸ“‚ Load Data</button>
            <button onclick="window.print()" class="btn-warning" data-lang="ko">ğŸ–¨ï¸ ë¦¬í¬íŠ¸ ì¸ì‡„</button>
            <button onclick="window.print()" class="btn-warning hidden" data-lang="en">ğŸ–¨ï¸ Print Report</button>
            <button onclick="resetData()" class="btn-danger" data-lang="ko">ğŸ”„ ë°ì´í„° ì´ˆê¸°í™”</button>
            <button onclick="resetData()" class="btn-danger hidden" data-lang="en">ğŸ”„ Reset Data</button>
        </div>
    </div>

    <script src="../scripts/chart.js"></script>
    <script src="../scripts/budget.js"></script>
</body>
</html>
