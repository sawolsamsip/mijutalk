<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-i18n-key="app_title">예산 관리 도구</title>
    <link rel="stylesheet" href="../scripts/budget.css">
    <link rel="stylesheet" href="../scripts/remixicon.css">
    <script src="../scripts/chart.js"></script>
</head>
<body>
    <header>
        <h1 data-i18n-key="app_title">예산 관리 도구</h1>
        <div class="header-controls">
            <button id="language-toggle" class="icon-btn">EN</button>
            <button id="darkmode-toggle" class="icon-btn"><i class="ri-moon-line"></i></button>
        </div>
    </header>

    <main class="container">
        <section class="budget-section">
            <h2 data-i18n-key="section_salary_title">월별 총 급여</h2>
            <form id="salary-form">
                <div class="form-group">
                    <label for="salary-gross" data-i18n-key="label_gross_salary">총 급여</label>
                    <div class="input-container salary-input-container">
                        <select id="salary-frequency-select" class="form-control" onchange="updateDisplay()">
                            <option value="monthly" data-i18n-key="frequency_monthly">월별</option>
                            <option value="annually" data-i18n-key="frequency_annually">연간</option>
                            <option value="weekly" data-i18n-key="frequency_weekly">주별</option>
                            <option value="bi-weekly" data-i18n-key="frequency_bi_weekly">2주별</option>
                        </select>
                        <input type="number" id="salary-gross" class="form-control" placeholder="0.00" value="0" min="0" oninput="updateDisplay()">
                    </div>
                </div>
                <p class="annual-salary-summary"><span data-i18n-key="label_annual_salary">연간 총 급여:</span> <span id="annual-salary-summary-display">$0.00</span></p>
                <button type="submit" class="btn" data-i18n-key="btn_save">저장</button>
            </form>
        </section>

        <section class="budget-section">
            <h2 data-i18n-key="section_default_frequency_title">기본 항목 주기 설정</h2>
            <div class="form-group">
                <label for="default-item-frequency-select" data-i18n-key="label_default_frequency">기본 지출/항목 주기:</label>
                <div class="input-container">
                    <select id="default-item-frequency-select" class="form-control" onchange="updateDisplay()">
                        <option value="monthly" data-i18n-key="frequency_monthly">월별</option>
                        <option value="annually" data-i18n-key="frequency_annually">연간</option>
                        <option value="weekly" data-i18n-key="frequency_weekly">주별</option>
                        <option value="bi-weekly" data-i18n-key="frequency_bi_weekly">2주별</option>
                    </select>
                </div>
            </div>
        </section>

        <section class="budget-section">
            <h2 data-i18n-key="section_taxes_title">세금</h2>
            <div class="form-group">
                <label for="tax-frequency-select" data-i18n-key="label_frequency">세금 주기:</label>
                <div class="input-container">
                    <select id="tax-frequency-select" class="form-control" onchange="updateDisplay()">
                        <option value="monthly" data-i18n-key="frequency_monthly">월별</option>
                        <option value="annually" data-i18n-key="frequency_annually">연간</option>
                        <option value="weekly" data-i18n-key="frequency_weekly">주별</option>
                        <option value="bi-weekly" data-i18n-key="frequency_bi_weekly">2주별</option>
                    </select>
                </div>
            </div>
            <div class="form-grid">
                <div class="form-group">
                    <label for="tax-federal-1" data-i18n-key="label_federal_withholding">연방 원천징수</label>
                    <div class="input-container">
                        <input type="number" id="tax-federal-1" class="form-control" min="0" value="0" oninput="updateDisplay()">
                    </div>
                </div>
                <div class="form-group">
                    <label for="tax-state-1" data-i18n-key="label_state_tax">주 세금</label>
                    <div class="input-container">
                        <input type="number" id="tax-state-1" class="form-control" min="0" value="0" oninput="updateDisplay()">
                    </div>
                </div>
                <div class="form-group">
                    <label for="tax-oasdi-1" data-i18n-key="label_oasdi">OASDI</label>
                    <div class="input-container">
                        <input type="number" id="tax-oasdi-1" class="form-control" min="0" value="0" oninput="updateDisplay()">
                    </div>
                </div>
                <div class="form-group">
                    <label for="tax-medicare-1" data-i18n-key="label_medicare">메디케어</label>
                    <div class="input-container">
                        <input type="number" id="tax-medicare-1" class="form-control" min="0" value="0" oninput="updateDisplay()">
                    </div>
                </div>
                <div class="form-group">
                    <label for="tax-casdi-1" data-i18n-key="label_ca_sdi">CA SDI</label>
                    <div class="input-container">
                        <input type="number" id="tax-casdi-1" class="form-control" min="0" value="0" oninput="updateDisplay()">
                    </div>
                </div>
            </div>
            <div class="custom-list" id="tax-custom-list">
            </div>
            <button class="btn add-custom-btn" data-type="tax" data-i18n-key="btn_add_item">항목 추가</button>
            <div class="chart-container">
                <canvas id="tax-chart"></canvas>
            </div>
        </section>

        <section class="budget-section">
            <h2 data-i18n-key="section_pre_tax_title">세전 공제</h2>
            <div class="form-group">
                <label for="pre-tax-frequency-select" data-i18n-key="label_frequency">세전 공제 주기:</label>
                <div class="input-container">
                    <select id="pre-tax-frequency-select" class="form-control" onchange="updateDisplay()">
                        <option value="monthly" data-i18n-key="frequency_monthly">월별</option>
                        <option value="annually" data-i18n-key="frequency_annually">연간</option>
                        <option value="weekly" data-i18n-key="frequency_weekly">주별</option>
                        <option value="bi-weekly" data-i18n-key="frequency_bi_weekly">2주별</option>
                    </select>
                </div>
            </div>
            <div class="form-grid">
                <div class="form-group">
                    <label for="deduct-medical-1" data-i18n-key="label_medical_premium">의료 보험료</label>
                    <div class="input-container">
                        <input type="number" id="deduct-medical-1" class="form-control" min="0" value="0" oninput="updateDisplay()">
                    </div>
                </div>
                <div class="form-group">
                    <label for="deduct-dental-1" data-i18n-key="label_dental_premium">치과 보험료</label>
                    <div class="input-container">
                        <input type="number" id="deduct-dental-1" class="form-control" min="0" value="0" oninput="updateDisplay()">
                    </div>
                </div>
                <div class="form-group">
                    <label for="deduct-vision-1" data-i18n-key="label_vision_premium">시력 보험료</label>
                    <div class="input-container">
                        <input type="number" id="deduct-vision-1" class="form-control" min="0" value="0" oninput="updateDisplay()">
                    </div>
                </div>
                <div class="form-group">
                    <label for="deduct-401k-trad-1" data-i18n-key="label_401k_traditional">401k 일반</label>
                    <div class="input-container">
                        <input type="number" id="deduct-401k-trad-1" class="form-control" min="0" value="0" oninput="updateDisplay()">
                    </div>
                </div>
            </div>
            <div class="custom-list" id="pre-tax-custom-list">
            </div>
            <button class="btn add-custom-btn" data-type="pre-tax" data-i18n-key="btn_add_item">항목 추가</button>
            <div class="chart-container">
                <canvas id="pre-tax-deduct-chart"></canvas>
            </div>
        </section>

        <section class="budget-section">
            <h2 data-i18n-key="section_post_tax_title">세후 공제</h2>
            <div class="form-group">
                <label for="post-tax-frequency-select" data-i18n-key="label_frequency">세후 공제 주기:</label>
                <div class="input-container">
                    <select id="post-tax-frequency-select" class="form-control" onchange="updateDisplay()">
                        <option value="monthly" data-i18n-key="frequency_monthly">월별</option>
                        <option value="annually" data-i18n-key="frequency_annually">연간</option>
                        <option value="weekly" data-i18n-key="frequency_weekly">주별</option>
                        <option value="bi-weekly" data-i18n-key="frequency_bi_weekly">2주별</option>
                    </select>
                </div>
            </div>
            <div class="form-grid">
                <div class="form-group">
                    <label for="deduct-spp-1" data-i18n-key="label_spp">주식 구매 계획</label>
                    <div class="input-container">
                        <input type="number" id="deduct-spp-1" class="form-control" min="0" value="0" oninput="updateDisplay()">
                    </div>
                </div>
                <div class="form-group">
                    <label for="deduct-adnd-1" data-i18n-key="label_adnd">AD&D</label>
                    <div class="input-container">
                        <input type="number" id="deduct-adnd-1" class="form-control" min="0" value="0" oninput="updateDisplay()">
                    </div>
                </div>
                <div class="form-group">
                    <label for="deduct-401k-roth-1" data-i18n-key="label_401k_roth">401k Roth</label>
                    <div class="input-container">
                        <input type="number" id="deduct-401k-roth-1" class="form-control" min="0" value="0" oninput="updateDisplay()">
                    </div>
                </div>
                <div class="form-group">
                    <label for="deduct-ltd-1" data-i18n-key="label_ltd">장기 장애</label>
                    <div class="input-container">
                        <input type="number" id="deduct-ltd-1" class="form-control" min="0" value="0" oninput="updateDisplay()">
                    </div>
                </div>
            </div>
            <div class="custom-list" id="post-tax-custom-list">
            </div>
            <button class="btn add-custom-btn" data-type="post-tax" data-i18n-key="btn_add_item">항목 추가</button>
            <div class="chart-container">
                <canvas id="post-tax-deduct-chart"></canvas>
            </div>
        </section>

        <section class="budget-section">
            <h2 data-i18n-key="section_expenses_title">지출 관리</h2>
            <div class="form-group">
                <label for="expense-frequency-select" data-i18n-key="label_frequency">지출 주기:</label>
                <div class="input-container">
                    <select id="expense-frequency-select" class="form-control" onchange="updateDisplay()">
                        <option value="monthly" data-i18n-key="frequency_monthly">월별</option>
                        <option value="annually" data-i18n-key="frequency_annually">연간</option>
                        <option value="weekly" data-i18n-key="frequency_weekly">주별</option>
                        <option value="bi-weekly" data-i18n-key="frequency_bi_weekly">2주별</option>
                    </select>
                </div>
            </div>
            <div class="form-grid">
                <div class="form-group">
                    <label for="exp-rent-1" data-i18n-key="label_rent_mortgage">월세/주택담보대출</label>
                    <div class="input-container">
                        <input type="number" id="exp-rent-1" class="form-control" min="0" value="0" oninput="updateDisplay()">
                    </div>
                </div>
                <div class="form-group">
                    <label for="exp-utilities-1" data-i18n-key="label_utilities">공과금</label>
                    <div class="input-container">
                        <input type="number" id="exp-utilities-1" class="form-control" min="0" value="0" oninput="updateDisplay()">
                    </div>
                </div>
                <div class="form-group">
                    <label for="exp-internet-1" data-i18n-key="label_internet">인터넷</label>
                    <div class="input-container">
                        <input type="number" id="exp-internet-1" class="form-control" min="0" value="0" oninput="updateDisplay()">
                    </div>
                </div>
                <div class="form-group">
                    <label for="exp-phone-1" data-i18n-key="label_phone">휴대폰 요금</label>
                    <div class="input-container">
                        <input type="number" id="exp-phone-1" class="form-control" min="0" value="0" oninput="updateDisplay()">
                    </div>
                </div>
                <div class="form-group">
                    <label for="exp-groceries-1" data-i18n-key="label_groceries">식료품</label>
                    <div class="input-container">
                        <input type="number" id="exp-groceries-1" class="form-control" min="0" value="0" oninput="updateDisplay()">
                    </div>
                </div>
                <div class="form-group">
                    <label for="exp-dining-1" data-i18n-key="label_dining_out">외식</label>
                    <div class="input-container">
                        <input type="number" id="exp-dining-1" class="form-control" min="0" value="0" oninput="updateDisplay()">
                    </div>
                </div>
                <div class="form-group">
                    <label for="exp-transport-1" data-i18n-key="label_transportation">교통비</label>
                    <div class="input-container">
                        <input type="number" id="exp-transport-1" class="form-control" min="0" value="0" oninput="updateDisplay()">
                    </div>
                </div>
                <div class="form-group">
                    <label for="exp-shopping-1" data-i18n-key="label_shopping">쇼핑</label>
                    <div class="input-container">
                        <input type="number" id="exp-shopping-1" class="form-control" min="0" value="0" oninput="updateDisplay()">
                    </div>
                </div>
                <div class="form-group">
                    <label for="exp-health-1" data-i18n-key="label_health_wellness">건강/웰빙</label>
                    <div class="input-container">
                        <input type="number" id="exp-health-1" class="form-control" min="0" value="0" oninput="updateDisplay()">
                    </div>
                </div>
                <div class="form-group">
                    <label for="exp-entertainment-1" data-i18n-key="label_entertainment">오락</label>
                    <div class="input-container">
                        <input type="number" id="exp-entertainment-1" class="form-control" min="0" value="0" oninput="updateDisplay()">
                    </div>
                </div>
            </div>
            <div class="custom-list" id="expenses-custom-list">
            </div>
            <button class="btn add-custom-btn" data-type="expense" data-i18n-key="btn_add_item">항목 추가</button>
            <div class="chart-container">
                <canvas id="expenses-chart"></canvas>
            </div>
        </section>

        <section class="budget-section">
            <h2 data-i18n-key="section_summary_title">예산 요약</h2>
            <div class="summary-results">
                <p data-i18n-key="label_gross_salary">총 급여:</p> <span id="gross-salary-summary-display">$0.00</span>
                <p data-i18n-key="label_total_taxes">총 세금:</p> <span id="total-taxes-display">$0.00</span>
                <p data-i18n-key="label_total_pre_tax">총 세전 공제액:</p> <span id="total-pre-tax-display">$0.00</span>
                <p data-i18n-key="label_total_post_tax">총 세후 공제액:</p> <span id="total-post-tax-display">$0.00</span>
                <p data-i18n-key="label_net_salary">순 월 급여:</p> <span id="net-salary-display">$0.00</span>
                <p data-i18n-key="label_total_expenses">총 지출:</p> <span id="total-expenses-display">$0.00</span>
                <p data-i18n-key="label_remaining_budget">남은 예산:</p> <span id="remaining-budget-display">$0.00</span>
            </div>
            <div class="chart-container">
                <canvas id="budget-distribution-chart"></canvas>
            </div>
        </section>

        <section class="budget-section">
            <h2 data-i18n-key="section_budget_rule_title">예산 규칙 적용 (Budget Rules)</h2>
            <div class="form-group">
                <label for="budget-rule-select" data-i18n-key="label_budget_rule_select">예산 규칙 선택:</label>
                <div class="input-container">
                    <select id="budget-rule-select" class="form-control rule-select" onchange="updateDisplay()">
                        <option value="50-30-20" data-i18n-key="rule_50_30_20">50/30/20 (필수/원하는 것/저축)</option>
                        <option value="70-20-10" data-i18n-key="rule_70_20_10">70/20/10 (필수/원하는 것/저축)</option>
                        <option value="80-20" data-i18n-key="rule_80_20">80/20 (필수/저축)</option>
                    </select>
                </div>
            </div>
            <div class="summary-results rule-breakdown">
                <div class="breakdown-item">
                    <p><span data-i18n-key="needs_label">필수 지출 (Needs)</span>:</p>
                    <p><span data-i18n-key="label_rule">규칙</span>: <span id="rule-needs">$0.00</span></p>
                    <p><span data-i18n-key="label_actual">실제</span>: <span id="actual-needs">$0.00</span></p>
                </div>
                <div class="breakdown-item">
                    <p><span data-i18n-key="wants_label">원하는 지출 (Wants)</span>:</p>
                    <p><span data-i18n-key="label_rule">규칙</span>: <span id="rule-wants">$0.00</span></p>
                    <p><span data-i18n-key="label_actual">실제</span>: <span id="actual-wants">$0.00</span></p>
                </div>
                <div class="breakdown-item">
                    <p><span data-i18n-key="savings_label">저축 (Savings)</span>:</p>
                    <p><span data-i18n-key="label_rule">규칙</span>: <span id="rule-savings">$0.00</span></p>
                    <p><span data-i18n-key="label_actual">실제</span>: <span id="actual-savings">$0.00</span></p>
                </div>
                <div class="breakdown-item total">
                    <p><span data-i18n-key="label_total_budget">총 예산</span>:</p>
                    <p><span data-i18n-key="label_rule">규칙</span>: <span id="rule-total">$0.00</span></p>
                    <p><span data-i18n-key="label_actual">실제</span>: <span id="actual-total">$0.00</span></p>
                </div>
                <div class="breakdown-item status">
                    <p><span data-i18n-key="label_budget_status">예산 상태</span>:</p>
                    <p><span id="budget-status"></span></p>
                </div>
            </div>
        </section>

        <section class="budget-section">
            <h2 data-i18n-key="section_ai_title">AI 지출 보고서</h2>
            <div class="form-group">
                <button id="ai-report-btn" class="btn" data-i18n-key="btn_ai_report">AI 보고서 생성</button>
            </div>
            <div id="ai-report-box" class="ai-report-box">
                <p data-i18n-key="ai_report_placeholder">"AI 보고서 생성"을 클릭하여 지출 습관에 대한 통찰력을 얻으세요.</p>
            </div>
        </section>

        <section class="budget-section">
            <h2 data-i18n-key="section_data_title">데이터 관리</h2>
            <div class="form-grid">
                <div class="form-group">
                    <div class="input-container">
                        <button id="export-json-btn" class="btn" data-i18n-key="btn_export">JSON 내보내기</button>
                    </div>
                </div>
                <div class="form-group">
                    <div class="input-container">
                        <button id="import-json-btn" class="btn" data-i18n-key="btn_import">JSON 가져오기</button>
                        <input type="file" id="import-json-input" class="form-control" accept=".json" style="display: none;">
                    </div>
                </div>
                <div class="form-group">
                    <div class="input-container">
                        <button id="clear-all-data-btn" class="btn btn-danger" data-i18n-key="btn_clear_all_data">모든 데이터 지우기</button>
                    </div>
                </div>
            </div>
        </section>
    </main>
    <script src="../scripts/budget.js"></script>
</body>
</html>
