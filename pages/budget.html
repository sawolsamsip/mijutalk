<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-i18n-key="app_title">예산 관리 도구</title>
    <link rel="stylesheet" href="../scripts/budget.css">
    <link rel="stylesheet" href="../scripts/remixicon.css">
    <script src="../scripts/chart.js"></script>
    <link rel="icon" type="image/png" sizes="16x16" href="../assets/favicons/favicon-16x16.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../assets/favicons/favicon-32x32.png">
    <link rel="apple-touch-icon" sizes="180x180" href="../assets/favicons/apple-touch-icon.png">
</head>
<body>
    <header>
        <h1 data-i18n-key="app_title">Budget Management Tool</h1>
        <div class="header-controls">
            <button id="currency-toggle" class="icon-btn">₩</button>
            <button id="language-toggle" class="icon-btn">EN</button>
            <button id="darkmode-toggle" class="icon-btn"><i class="ri-moon-line"></i></button>
        </div>
    </header>

    <main class="container">
        <section class="budget-section calculation-mode-section">
            <h2 data-i18n-key="section_calculation_mode_title">계산 방식 선택</h2>
            <div class="mode-toggle-container">
                <span data-i18n-key="mode_simple">기본 모드 (순수입)</span>
                <label class="switch">
                    <input type="checkbox" id="mode-toggle-checkbox">
                    <span class="slider round"></span>
                </label>
                <span data-i18n-key="mode_advanced">고급 모드 (총수입)</span>
            </div>
        </section>

        <div id="advanced-mode-container" class="hidden">
            <section class="budget-section">
                <h2 data-i18n-key="section_salary_title">Gross Salary</h2>
                <form id="salary-form">
                    <div class="form-group">
                        <label for="salary-gross" data-i18n-key="label_base_salary">기본 급여</label>
                        <div class="input-container salary-input-container">
                            <select id="salary-frequency-select" class="form-control">
                                <option value="monthly" data-i18n-key="frequency_monthly">Monthly</option>
                                <option value="annual" data-i18n-key="frequency_annually">Annual</option>
                                <option value="weekly" data-i18n-key="frequency_weekly">Weekly</option>
                                <option value="bi-weekly" data-i18n-key="frequency_bi_weekly">Bi-Weekly</option>
                            </select>
                            <input type="number" id="salary-gross" class="form-control" placeholder="0.00" value="0" min="0">
                        </div>
                    </div>
                    <div class="custom-list" id="custom-income-list"></div>
                    <button type="button" class="btn add-custom-btn" data-type="income" data-i18n-key="btn_add_income">추가 수입</button>
                    <p class="annual-salary-summary hidden"><span data-i18n-key="label_annual_salary">Annual Gross Salary:</span> <span id="annual-salary-summary-display">$0.00</span></p>
                </form>
            </section>
            <section class="budget-section">
                <h2 data-i18n-key="section_taxes_title">Taxes</h2>
                <div class="form-group"><label for="tax-frequency-select" data-i18n-key="label_frequency">Frequency:</label><select id="tax-frequency-select" class="form-control"><option value="monthly" data-i18n-key="frequency_monthly">Monthly</option><option value="annual" data-i18n-key="frequency_annually">Annual</option><option value="weekly" data-i18n-key="frequency_weekly">Weekly</option><option value="bi-weekly" data-i18n-key="frequency_bi_weekly">Bi-Weekly</option></select></div>
                <div class="form-grid">
                    <div class="form-group" data-item-id="tax-federal-1"><label><span data-i18n-key="label_federal_withholding">Federal Withholding</span><span class="category-tag"></span></label><input type="number" id="tax-federal-1" class="form-control" min="0" value="0"></div>
                    <div class="form-group" data-item-id="tax-state-1"><label><span data-i18n-key="label_state_tax">State Tax</span><span class="category-tag"></span></label><input type="number" id="tax-state-1" class="form-control" min="0" value="0"></div>
                    <div class="form-group" data-item-id="tax-oasdi-1"><label><span data-i18n-key="label_oasdi">OASDI</span><span class="category-tag"></span></label><input type="number" id="tax-oasdi-1" class="form-control" min="0" value="0"></div>
                    <div class="form-group" data-item-id="tax-medicare-1"><label><span data-i18n-key="label_medicare">Medicare</span><span class="category-tag"></span></label><input type="number" id="tax-medicare-1" class="form-control" min="0" value="0"></div>
                    <div class="form-group" data-item-id="tax-casdi-1"><label><span data-i18n-key="label_ca_sdi">CA SDI</span><span class="category-tag"></span></label><input type="number" id="tax-casdi-1" class="form-control" min="0" value="0"></div>
                </div>
                <div class="custom-list" id="tax-custom-list"></div>
                <button class="btn add-custom-btn" data-type="tax" data-i18n-key="btn_add_item">Add Item</button>
                <div class="chart-container"><canvas id="tax-chart"></canvas></div>
            </section>
            <section class="budget-section">
                <h2 data-i18n-key="section_pre_tax_title">Pre-Tax Deductions</h2>
                <div class="form-group"><label for="pre-tax-frequency-select" data-i18n-key="label_frequency">Frequency:</label><select id="pre-tax-frequency-select" class="form-control"><option value="monthly" data-i18n-key="frequency_monthly">Monthly</option><option value="annual" data-i18n-key="frequency_annually">Annual</option><option value="weekly" data-i18n-key="frequency_weekly">Weekly</option><option value="bi-weekly" data-i18n-key="frequency_bi_weekly">Bi-Weekly</option></select></div>
                <div class="form-grid">
                    <div class="form-group" data-item-id="deduct-medical-1"><label><span data-i18n-key="label_medical_premium">Medical Premium</span><span class="category-tag"></span></label><input type="number" id="deduct-medical-1" class="form-control" min="0" value="0"></div>
                    <div class="form-group" data-item-id="deduct-dental-1"><label><span data-i18n-key="label_dental_premium">Dental Premium</span><span class="category-tag"></span></label><input type="number" id="deduct-dental-1" class="form-control" min="0" value="0"></div>
                    <div class="form-group" data-item-id="deduct-vision-1"><label><span data-i18n-key="label_vision_premium">Vision Premium</span><span class="category-tag"></span></label><input type="number" id="deduct-vision-1" class="form-control" min="0" value="0"></div>
                    <div class="form-group" data-item-id="deduct-401k-trad-1"><label><span data-i18n-key="label_401k_traditional">401k Traditional</span><span class="category-tag"></span></label><input type="number" id="deduct-401k-trad-1" class="form-control" min="0" value="0"></div>
                </div>
                <div class="custom-list" id="pre-tax-custom-list"></div>
                <button class="btn add-custom-btn" data-type="pre-tax" data-i18n-key="btn_add_item">Add Item</button>
                <div class="chart-container"><canvas id="pre-tax-deduct-chart"></canvas></div>
            </section>
            <section class="budget-section">
                <h2 data-i18n-key="section_post_tax_title">Post-Tax Deductions</h2>
                <div class="form-group"><label for="post-tax-frequency-select" data-i18n-key="label_frequency">Frequency:</label><select id="post-tax-frequency-select" class="form-control"><option value="monthly" data-i18n-key="frequency_monthly">Monthly</option><option value="annual" data-i18n-key="frequency_annually">Annual</option><option value="weekly" data-i18n-key="frequency_weekly">Weekly</option><option value="bi-weekly" data-i18n-key="frequency_bi_weekly">Bi-Weekly</option></select></div>
                <div class="form-grid">
                    <div class="form-group" data-item-id="deduct-spp-1"><label><span data-i18n-key="label_spp">SPP</span><span class="category-tag"></span></label><input type="number" id="deduct-spp-1" class="form-control" min="0" value="0"></div>
                    <div class="form-group" data-item-id="deduct-adnd-1"><label><span data-i18n-key="label_adnd">AD&D</span><span class="category-tag"></span></label><input type="number" id="deduct-adnd-1" class="form-control" min="0" value="0"></div>
                    <div class="form-group" data-item-id="deduct-401k-roth-1"><label><span data-i18n-key="label_401k_roth">401k Roth</span><span class="category-tag"></span></label><input type="number" id="deduct-401k-roth-1" class="form-control" min="0" value="0"></div>
                    <div class="form-group" data-item-id="deduct-ltd-1"><label><span data-i18n-key="label_ltd">LTD</span><span class="category-tag"></span></label><input type="number" id="deduct-ltd-1" class="form-control" min="0" value="0"></div>
                </div>
                <div class="custom-list" id="post-tax-custom-list"></div>
                <button class="btn add-custom-btn" data-type="post-tax" data-i18n-key="btn_add_item">Add Item</button>
                <div class="chart-container"><canvas id="post-tax-deduct-chart"></canvas></div>
            </section>
        </div>

        <section id="simple-mode-container" class="budget-section">
            <h2 data-i18n-key="section_net_income_title">순수입</h2>
            <div class="form-group">
                <label for="net-income-input" data-i18n-key="label_net_income">월 순수입 (세후)</label>
                <input type="number" id="net-income-input" class="form-control" placeholder="0.00" value="0" min="0">
            </div>
        </section>

        <section class="budget-section">
            <h2 data-i18n-key="section_expenses_title">Expense Management</h2>
            <div class="form-group">
                <label for="expense-frequency-select" data-i18n-key="label_frequency">Frequency:</label>
                <select id="expense-frequency-select" class="form-control">
                     <option value="monthly" data-i18n-key="frequency_monthly">Monthly</option>
                     <option value="annual" data-i18n-key="frequency_annually">Annual</option>
                     <option value="weekly" data-i18n-key="frequency_weekly">Weekly</option>
                     <option value="bi-weekly" data-i18n-key="frequency_bi_weekly">Bi-Weekly</option>
                </select>
            </div>
            <div class="form-grid">
                <div class="form-group" data-item-id="exp-rent-1"><label><span data-i18n-key="label_rent_mortgage">Rent/Mortgage</span><span class="category-tag"></span></label><input type="number" id="exp-rent-1" class="form-control" min="0" value="0"></div>
                <div class="form-group" data-item-id="exp-utilities-1"><label><span data-i18n-key="label_utilities">Utilities</span><span class="category-tag"></span></label><input type="number" id="exp-utilities-1" class="form-control" min="0" value="0"></div>
                <div class="form-group" data-item-id="exp-internet-1"><label><span data-i18n-key="label_internet">Internet</span><span class="category-tag"></span></label><input type="number" id="exp-internet-1" class="form-control" min="0" value="0"></div>
                <div class="form-group" data-item-id="exp-phone-1"><label><span data-i18n-key="label_phone">Phone Bill</span><span class="category-tag"></span></label><input type="number" id="exp-phone-1" class="form-control" min="0" value="0"></div>
                <div class="form-group" data-item-id="exp-groceries-1"><label><span data-i18n-key="label_groceries">Groceries</span><span class="category-tag"></span></label><input type="number" id="exp-groceries-1" class="form-control" min="0" value="0"></div>
                <div class="form-group" data-item-id="exp-dining-1"><label><span data-i18n-key="label_dining_out">Dining Out</span><span class="category-tag"></span></label><input type="number" id="exp-dining-1" class="form-control" min="0" value="0"></div>
                <div class="form-group" data-item-id="exp-transport-1"><label><span data-i18n-key="label_transportation">Transportation</span><span class="category-tag"></span></label><input type="number" id="exp-transport-1" class="form-control" min="0" value="0"></div>
                <div class="form-group" data-item-id="exp-shopping-1"><label><span data-i18n-key="label_shopping">Shopping</span><span class="category-tag"></span></label><input type="number" id="exp-shopping-1" class="form-control" min="0" value="0"></div>
                <div class="form-group" data-item-id="exp-health-1"><label><span data-i18n-key="label_health_wellness">Health/Wellness</span><span class="category-tag"></span></label><input type="number" id="exp-health-1" class="form-control" min="0" value="0"></div>
                <div class="form-group" data-item-id="exp-entertainment-1"><label><span data-i18n-key="label_entertainment">Entertainment</span><span class="category-tag"></span></label><input type="number" id="exp-entertainment-1" class="form-control" min="0" value="0"></div>
            </div>
            <div class="custom-list" id="expenses-custom-list"></div>
            <button class="btn add-custom-btn" data-type="expense" data-i18n-key="btn_add_item">Add Item</button>
            <div class="chart-container"><canvas id="expenses-chart"></canvas></div>
        </section>

        <section class="budget-section">
            <h2 data-i18n-key="section_summary_title">Budget Summary</h2>
            <div class="form-group">
                <label for="summary-frequency-select" data-i18n-key="label_summary_frequency">Summary Frequency:</label>
                <select id="summary-frequency-select" class="form-control">
                    <option value="monthly" data-i18n-key="frequency_monthly">Monthly</option>
                    <option value="annual" data-i18n-key="frequency_annually">Annual</option>
                    <option value="weekly" data-i18n-key="frequency_weekly">Weekly</option>
                    <option value="bi-weekly" data-i18n-key="frequency_bi_weekly">Bi-Weekly</option>
                </select>
            </div>
            <div id="summary-advanced-view" class="summary-results hidden">
                <p data-i18n-key="label_gross_salary">Gross Salary:</p> <span id="summary-gross-salary"></span>
                <p data-i18n-key="label_total_taxes">Total Taxes:</p> <span id="summary-total-taxes"></span>
                <p data-i18n-key="label_total_pre_tax">Total Pre-Tax:</p> <span id="summary-total-pre-tax"></span>
                <p data-i18n-key="label_total_post_tax">Total Post-Tax:</p> <span id="summary-total-post-tax"></span>
            </div>
            <div class="summary-results">
                <p data-i18n-key="label_net_salary">Net Salary:</p> <span id="summary-net-salary"></span>
                <p data-i18n-key="label_total_expenses">Total Expenses:</p> <span id="summary-total-expenses"></span>
                <p data-i18n-key="label_remaining_budget">Remaining Budget:</p> <span id="summary-remaining-budget"></span>
            </div>
            <div class="chart-container"><canvas id="budget-distribution-chart"></canvas></div>
        </section>

        <section class="budget-section">
            <h2 data-i18n-key="section_budget_rule_title">Budget Rule Application</h2>
            <div class="form-group">
                <label for="budget-rule-select" data-i18n-key="label_budget_rule_select">Select Budget Rule:</label>
                <select id="budget-rule-select" class="form-control rule-select">
                    <option value="50-30-20" data-i18n-key="rule_50_30_20_title">50/30/20 Rule</option>
                    <option value="70-20-10" data-i18n-key="rule_70_20_10_title">70/20/10 Rule</option>
                    <option value="80-20" data-i18n-key="rule_80_20_title">80/20 Rule</option>
                </select>
            </div>
            <div id="budget-rule-breakdown"></div>
        </section>

        <section class="budget-section">
            <h2 data-i18n-key="section_ai_title">AI Expense Report</h2>
            <button id="ai-report-btn" class="btn" data-i18n-key="btn_ai_report">Generate AI Report</button>
            <div id="ai-report-box" class="ai-report-box"><p data-i18n-key="ai_report_placeholder">Click "Generate AI Report" for insights.</p></div>
        </section>

        <section class="budget-section">
            <h2 data-i18n-key="section_data_title">Data Management</h2>
            <div class="data-actions">
                <button id="export-json-btn" class="btn" data-i18n-key="btn_export">Export</button>
                <button id="import-json-btn" class="btn" data-i18n-key="btn_import">Import</button>
                <input type="file" id="import-json-input" accept=".json" style="display: none;">
                <button id="clear-all-data-btn" class="btn btn-danger" data-i18n-key="btn_clear_all_data">Clear Data</button>
                <button id="print-btn" class="btn" data-i18n-key="btn_print">Print</button>
                <button id="email-btn" class="btn" data-i18n-key="btn_email">Email</button>
                <button id="share-btn" class="btn" data-i18n-key="btn_share">Share</button>
            </div>
        </section>
    </main>
    
    <div id="modal-container" class="modal-container hidden">
        <div class="modal-content">
            <button class="modal-close-btn">&times;</button>
            <h3 id="modal-title"></h3>
            <ul id="modal-list"></ul>
        </div>
    </div>

    <script src="../scripts/budget.js"></script>
</body>
</html>
