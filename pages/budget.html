<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=340, initial-scale=1, maximum-scale=1">
  <title>DeepSeek ê°€ê³„ë¶€</title>
  <link rel="stylesheet" href="../scripts/budget.css">
</head>
<body>
  <nav class="navbar">
    <b>DeepSeek ê°€ê³„ë¶€</b>
    <button id="darkmode-toggle" class="nav-btn" aria-label="ë‹¤í¬ëª¨ë“œ ì „í™˜">ğŸŒ™</button>
    <button id="help-btn" class="nav-btn" aria-label="ë„ì›€ë§">â“</button>
  </nav>
  <div id="alert-bar"></div>
  
  <!-- ì„¸ì „ ì›”ê¸‰ ì…ë ¥ -->
  <section class="card">
    <h2>ì„¸ì „ ì›”ê¸‰ ì…ë ¥</h2>
    <form id="salary-form" style="display:flex;align-items:center;gap:10px;">
      <label>ì„¸ì „ ì›”ê¸‰: <input type="number" id="salary-gross" min="0" required style="width:130px;" aria-label="ì„¸ì „ ì›”ê¸‰ ì…ë ¥"></label>
      <button type="submit" class="nav-btn">ì €ì¥</button>
    </form>
    <div id="salary-summary" style="margin-top:12px;"></div>
  </section>

  <!-- ì„¸ê¸ˆ ì„¹ì…˜ -->
  <section class="card">
    <h2>ì„¸ê¸ˆ í•­ëª© ì…ë ¥</h2>
    <form id="tax-form" style="display:flex;flex-wrap:wrap;gap:14px;">
      <label>Federal Withholding: <input type="number" id="tax-federal" min="0" style="width:110px;"></label>
      <label>State Tax: <input type="number" id="tax-state" min="0" style="width:110px;"></label>
      <label>OASDI: <input type="number" id="tax-oasdi" min="0" style="width:110px;"></label>
      <label>Medicare: <input type="number" id="tax-medicare" min="0" style="width:110px;"></label>
      <label>CA SDI: <input type="number" id="tax-casdi" min="0" style="width:110px;"></label>
    </form>
    <div id="tax-custom-list" style="margin-top:10px;"></div>
    <button type="button" onclick="addCustomRow('tax')" style="margin-top:4px;">ì„¸ê¸ˆ í•­ëª© ì¶”ê°€</button>
    <form id="tax-add-form" style="margin-top:10px;display:flex;align-items:center;gap:10px;">
      <label>í•­ëª©ëª…: <input type="text" id="tax-item-name" style="width:90px;"></label>
      <label>ê¸ˆì•¡: <input type="number" id="tax-item-amount" min="1" style="width:80px;"></label>
      <button type="submit" class="nav-btn">ê¸°ë¡</button>
    </form>
    <div id="tax-hist-list" style="margin-top:12px;"></div>
  </section>

  <!-- ì„¸ì „ ê³µì œ ì„¹ì…˜ -->
  <section class="card">
    <h2>ì„¸ì „ ê³µì œ í•­ëª© ì…ë ¥</h2>
    <form id="pre-tax-deduction-form" style="display:flex;flex-wrap:wrap;gap:14px;">
      <label>Medical Premium: <input type="number" id="deduct-medical" min="0" style="width:110px;"></label>
      <label>Dental Premium: <input type="number" id="deduct-dental" min="0" style="width:110px;"></label>
      <label>Vision Premium: <input type="number" id="deduct-vision" min="0" style="width:110px;"></label>
      <label>MSEAP: <input type="number" id="deduct-mseap" min="0" style="width:110px;"></label>
      <label>401k Traditional: <input type="number" id="deduct-401k-trad" min="0" style="width:110px;"></label>
    </form>
    <div id="pre-tax-custom-list" style="margin-top:10px;"></div>
    <button type="button" onclick="addCustomRow('pre-tax')" style="margin-top:4px;">ì„¸ì „ ê³µì œ í•­ëª© ì¶”ê°€</button>
    <form id="pre-tax-add-form" style="margin-top:10px;display:flex;align-items:center;gap:10px;">
      <label>í•­ëª©ëª…: <input type="text" id="pre-tax-item-name" style="width:90px;"></label>
      <label>ê¸ˆì•¡: <input type="number" id="pre-tax-item-amount" min="1" style="width:80px;"></label>
      <button type="submit" class="nav-btn">ê¸°ë¡</button>
    </form>
    <div id="pre-tax-hist-list" style="margin-top:12px;"></div>
  </section>

  <!-- ì„¸í›„ ê³µì œ ì„¹ì…˜ -->
  <section class="card">
    <h2>ì„¸í›„ ê³µì œ í•­ëª© ì…ë ¥</h2>
    <form id="post-tax-deduction-form" style="display:flex;flex-wrap:wrap;gap:14px;">
      <label>Stock Purchase Plan: <input type="number" id="deduct-spp" min="0" style="width:110px;"></label>
      <label>AD&D: <input type="number" id="deduct-adnd" min="0" style="width:110px;"></label>
      <label>Critical Illness: <input type="number" id="deduct-critical" min="0" style="width:110px;"></label>
      <label>Accidental Insurance: <input type="number" id="deduct-accident" min="0" style="width:110px;"></label>
      <label>401k Roth: <input type="number" id="deduct-401k-roth" min="0" style="width:110px;"></label>
      <label>Legal Services: <input type="number" id="deduct-legal" min="0" style="width:110px;"></label>
      <label>LTD: <input type="number" id="deduct-ltd" min="0" style="width:110px;"></label>
    </form>
    <div id="post-tax-custom-list" style="margin-top:10px;"></div>
    <button type="button" onclick="addCustomRow('post-tax')" style="margin-top:4px;">ì„¸í›„ ê³µì œ í•­ëª© ì¶”ê°€</button>
    <form id="post-tax-add-form" style="margin-top:10px;display:flex;align-items:center;gap:10px;">
      <label>í•­ëª©ëª…: <input type="text" id="post-tax-item-name" style="width:90px;"></label>
      <label>ê¸ˆì•¡: <input type="number" id="post-tax-item-amount" min="1" style="width:80px;"></label>
      <button type="submit" class="nav-btn">ê¸°ë¡</button>
    </form>
    <div id="post-tax-hist-list" style="margin-top:12px;"></div>
  </section>

  <!-- ì§€ì¶œ ì…ë ¥ -->
  <section class="card">
    <h2>ì§€ì¶œ ì…ë ¥</h2>
    <form id="expense-form" enctype="multipart/form-data" autocomplete="off" style="display:flex;flex-wrap:wrap;gap:7px;">
      <select id="expense-category" aria-label="ì¹´í…Œê³ ë¦¬ ì„ íƒ"></select>
      <input type="text" id="expense-desc" placeholder="ì§€ì¶œ ë‚´ìš©" required aria-label="ì§€ì¶œ ë‚´ìš© ì…ë ¥">
      <input type="number" id="expense-value" min="1" placeholder="ê¸ˆì•¡" required aria-label="ê¸ˆì•¡ ì…ë ¥">
      <input type="text" id="expense-tags" placeholder="íƒœê·¸(ì‰¼í‘œêµ¬ë¶„)" aria-label="íƒœê·¸ ì…ë ¥">
      <input type="text" id="expense-memo" placeholder="ë©”ëª¨(ì„ íƒ)" aria-label="ë©”ëª¨ ì…ë ¥">
      <input type="file" id="expense-image" accept="image/*" aria-label="ì˜ìˆ˜ì¦ ì²¨ë¶€">
      <button type="submit" class="nav-btn" aria-label="ì €ì¥">ì €ì¥</button>
    </form>
    <div id="expenses-list" style="margin-top:12px;"></div>
  </section>

  <!-- ë°ì´í„° ë°±ì—…/ë³µì› -->
  <section class="card">
    <h2>ë°ì´í„° ë°±ì—…/ë³µì›</h2>
    <button id="export-json-btn" class="nav-btn">ë‚´ë³´ë‚´ê¸°(JSON)</button>
    <input type="file" id="import-json-input" style="display:none" accept="application/json">
    <button id="import-json-btn" class="nav-btn">ê°€ì ¸ì˜¤ê¸°(JSON)</button>
    <span id="backup-msg" style="margin-left:12px;"></span>
  </section>

  <!-- AI ì†Œë¹„ ë¦¬í¬íŠ¸ -->
  <section class="card">
    <h2>AI ì†Œë¹„ ë¦¬í¬íŠ¸ & ì ˆì•½ íŒ</h2>
    <button id="ai-report-btn" class="nav-btn">AI ë¦¬í¬íŠ¸ ìƒì„±</button>
    <div id="ai-report-box" style="margin-top:18px;"></div>
  </section>

  <!-- ë„ì›€ë§ ëª¨ë‹¬ -->
  <div id="help-modal" style="display:none;"></div>

  <script src="../scripts/chart.umd.min.js"></script>
  <script src="../scripts/budget.js"></script>
  <script>
    // ì‚¬ìš©ì ì •ì˜ ì…ë ¥ í–‰ ë™ì  ì¶”ê°€/ì‚­ì œ í•¨ìˆ˜
    function addCustomRow(type) {
      const listId = {
        'tax': 'tax-custom-list',
        'pre-tax': 'pre-tax-custom-list',
        'post-tax': 'post-tax-custom-list'
      }[type];
      const div = document.createElement('div');
      div.style.marginBottom = "6px";
      div.innerHTML = `
        <input type="text" placeholder="í•­ëª©ëª…" class="${type}-custom-name" style="width:90px;">
        <input type="number" min="0" placeholder="ê¸ˆì•¡" class="${type}-custom-amount" style="width:80px;">
        <button type="button" onclick="this.parentNode.remove()">ì‚­ì œ</button>
      `;
      document.getElementById(listId).appendChild(div);
    }
  </script>
</body>
</html>
