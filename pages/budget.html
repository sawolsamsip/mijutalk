<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-i18n-key="app_title">예산 관리 도구</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <link href="../scripts/remixicon.css" rel="stylesheet">
    <link rel="stylesheet" href="../scripts/budget.css">
</head>
<body>
    <header>
        <h1 data-i18n-key="app_title">예산 관리 도구</h1>
        <div class="header-controls">
            <button id="language-toggle" class="icon-btn" title="언어 변경">KO</button>
            <button id="darkmode-toggle" class="icon-btn" title="다크 모드 전환"><i class="ri-moon-line"></i></button>
        </div>
    </header>

    <div class="container">
        <section class="budget-section">
            <h2 data-i18n-key="section_salary_title">월별 총 급여</h2>
            <form id="salary-form" class="form-group">
                <label for="salary-gross" data-i18n-key="label_gross_salary">총 급여</label>
                <input type="number" id="salary-gross" min="0" placeholder="0.00">
            </form>
        </section>

        <div class="main-grid">
            <div class="grid-column">
                <section class="budget-section">
                    <h2 data-i18n-key="section_taxes_title">세금</h2>
                    <div class="form-grid">
                        <div class="form-group"><label data-i18n-key="label_federal_withholding" for="tax-federal"></label><input type="number" id="tax-federal" min="0"></div>
                        <div class="form-group"><label data-i18n-key="label_state_tax" for="tax-state"></label><input type="number" id="tax-state" min="0"></div>
                        <div class="form-group"><label data-i18n-key="label_oasdi" for="tax-oasdi"></label><input type="number" id="tax-oasdi" min="0"></div>
                        <div class="form-group"><label data-i18n-key="label_medicare" for="tax-medicare"></label><input type="number" id="tax-medicare" min="0"></div>
                        <div class="form-group"><label data-i18n-key="label_ca_sdi" for="tax-casdi"></label><input type="number" id="tax-casdi" min="0"></div>
                    </div>
                    <div id="tax-custom-list" class="custom-list"></div>
                    <form class="add-item-form" data-type="tax" style="display: none;">
                        <input type="text" class="custom-item-name" data-i18n-placeholder="placeholder_item_name" placeholder="항목 이름">
                        <input type="number" class="custom-item-amount" data-i18n-placeholder="placeholder_amount" placeholder="금액">
                        <button type="submit" class="btn btn-add-inline"><i class="ri-check-line"></i></button>
                        <button type="button" class="btn btn-cancel-inline"><i class="ri-close-line"></i></button>
                    </form>
                    <button class="btn add-custom-btn" data-type="tax"><i class="ri-add-line"></i> <span data-i18n-key="btn_add_item">항목 추가</span></button>
                </section>

                <section class="budget-section">
                    <h2 data-i18n-key="section_pre_tax_title">세전 공제</h2>
                    <div class="form-grid">
                        <div class="form-group"><label data-i18n-key="label_medical_premium" for="deduct-medical"></label><input type="number" id="deduct-medical" min="0"></div>
                        <div class="form-group"><label data-i18n-key="label_dental_premium" for="deduct-dental"></label><input type="number" id="deduct-dental" min="0"></div>
                        <div class="form-group"><label data-i18n-key="label_vision_premium" for="deduct-vision"></label><input type="number" id="deduct-vision" min="0"></div>
                        <div class="form-group"><label data-i18n-key="label_401k_traditional" for="deduct-401k-trad"></label><input type="number" id="deduct-401k-trad" min="0"></div>
                    </div>
                    <div id="pre-tax-custom-list" class="custom-list"></div>
                    <form class="add-item-form" data-type="pre-tax" style="display: none;">
                        <input type="text" class="custom-item-name" data-i18n-placeholder="placeholder_item_name" placeholder="항목 이름">
                        <input type="number" class="custom-item-amount" data-i18n-placeholder="placeholder_amount" placeholder="금액">
                        <button type="submit" class="btn btn-add-inline"><i class="ri-check-line"></i></button>
                        <button type="button" class="btn btn-cancel-inline"><i class="ri-close-line"></i></button>
                    </form>
                    <button class="btn add-custom-btn" data-type="pre-tax"><i class="ri-add-line"></i> <span data-i18n-key="btn_add_item">항목 추가</span></button>
                </section>

                <section class="budget-section">
                    <h2 data-i18n-key="section_post_tax_title">세후 공제</h2>
                    <div class="form-grid">
                        <div class="form-group"><label data-i18n-key="label_spp" for="deduct-spp"></label><input type="number" id="deduct-spp" min="0"></div>
                        <div class="form-group"><label data-i18n-key="label_adnd" for="deduct-adnd"></label><input type="number" id="deduct-adnd" min="0"></div>
                        <div class="form-group"><label data-i18n-key="label_401k_roth" for="deduct-401k-roth"></label><input type="number" id="deduct-401k-roth" min="0"></div>
                        <div class="form-group"><label data-i18n-key="label_ltd" for="deduct-ltd"></label><input type="number" id="deduct-ltd" min="0"></div>
                    </div>
                    <div id="post-tax-custom-list" class="custom-list"></div>
                    <form class="add-item-form" data-type="post-tax" style="display: none;">
                        <input type="text" class="custom-item-name" data-i18n-placeholder="placeholder_item_name" placeholder="항목 이름">
                        <input type="number" class="custom-item-amount" data-i18n-placeholder="placeholder_amount" placeholder="금액">
                        <button type="submit" class="btn btn-add-inline"><i class="ri-check-line"></i></button>
                        <button type="button" class="btn btn-cancel-inline"><i class="ri-close-line"></i></button>
                    </form>
                    <button class="btn add-custom-btn" data-type="post-tax"><i class="ri-add-line"></i> <span data-i18n-key="btn_add_item">항목 추가</span></button>
                </section>

                <section class="budget-section">
                    <h2 data-i18n-key="section_expenses_title">지출 관리</h2>
                    <div class="form-grid">
                        <div class="form-group"><label data-i18n-key="label_rent_mortgage" for="exp-rent"></label><input type="number" id="exp-rent" min="0" data-category="need"></div>
                        <div class="form-group"><label data-i18n-key="label_utilities" for="exp-utilities"></label><input type="number" id="exp-utilities" min="0" data-category="need"></div>
                        <div class="form-group"><label data-i18n-key="label_internet" for="exp-internet"></label><input type="number" id="exp-internet" min="0" data-category="need"></div>
                        <div class="form-group"><label data-i18n-key="label_phone" for="exp-phone"></label><input type="number" id="exp-phone" min="0" data-category="need"></div>
                        <div class="form-group"><label data-i18n-key="label_groceries" for="exp-groceries"></label><input type="number" id="exp-groceries" min="0" data-category="need"></div>
                        <div class="form-group"><label data-i18n-key="label_transportation" for="exp-transport"></label><input type="number" id="exp-transport" min="0" data-category="need"></div>
                        <div class="form-group"><label data-i18n-key="label_dining_out" for="exp-dining"></label><input type="number" id="exp-dining" min="0" data-category="want"></div>
                        <div class="form-group"><label data-i18n-key="label_shopping" for="exp-shopping"></label><input type="number" id="exp-shopping" min="0" data-category="want"></div>
                        <div class="form-group"><label data-i18n-key="label_health_wellness" for="exp-health"></label><input type="number" id="exp-health" min="0" data-category="want"></div>
                        <div class="form-group"><label data-i18n-key="label_entertainment" for="exp-entertainment"></label><input type="number" id="exp-entertainment" min="0" data-category="want"></div>
                    </div>
                    <div id="expenses-custom-list" class="custom-list"></div>
                    <form class="add-item-form" data-type="expense" style="display: none;">
                        <input type="text" class="custom-item-name" data-i18n-placeholder="placeholder_item_name" placeholder="항목 이름">
                        <input type="number" class="custom-item-amount" data-i18n-placeholder="placeholder_amount" placeholder="금액">
                        <select class="custom-item-category">
                            <option value="want" data-i18n-key="category_want">선택</option>
                            <option value="need" data-i18n-key="category_need">필수</option>
                        </select>
                        <button type="submit" class="btn btn-add-inline"><i class="ri-check-line"></i></button>
                        <button type="button" class="btn btn-cancel-inline"><i class="ri-close-line"></i></button>
                    </form>
                    <button class="btn add-custom-btn" data-type="expense"><i class="ri-add-line"></i> <span data-i18n-key="btn_add_item">항목 추가</span></button>
                </section>
            </div>

            <div class="grid-column">
                <section class="budget-section summary-section">
                    <h2 data-i18n-key="section_summary_title">예산 요약</h2>
                    <div class="summary-grid">
                        <div class="summary-item"><span data-i18n-key="label_gross_salary"></span><span id="gross-salary-summary-display">$0.00</span></div>
                        <div class="summary-item"><span data-i18n-key="label_total_taxes"></span><span id="total-taxes-display">$0.00</span></div>
                        <div class="summary-item"><span data-i18n-key="label_total_pre_tax"></span><span id="total-pre-tax-display">$0.00</span></div>
                        <div class="summary-item"><span data-i18n-key="label_total_post_tax"></span><span id="total-post-tax-display">$0.00</span></div>
                        <div class="summary-item net-salary"><strong data-i18n-key="label_net_salary"></strong><strong id="net-salary-display">$0.00</strong></div>
                        <div class="summary-item"><span data-i18n-key="label_total_expenses"></span><span id="total-expenses-display">$0.00</span></div>
                        <div class="summary-item remaining-budget"><strong data-i18n-key="label_remaining_budget"></strong><strong id="remaining-budget-display">$0.00</strong></div>
                    </div>
                </section>
                
                <section class="budget-section">
                    <h2 data-i18n-key="section_budget_rule_title">예산 규칙 적용</h2>
                    <div class="form-group">
                        <select id="budget-rule-select">
                            <option value="50-30-20">50/30/20 (Needs/Wants/Savings)</option>
                            <option value="70-20-10">70/20/10 (Needs/Wants/Savings)</option>
                            <option value="80-20">80/20 (Needs/Savings)</option>
                        </select>
                    </div>
                    <div class="rule-comparison-table">
                        <table>
                            <thead>
                                <tr>
                                    <th data-i18n-key="table_category">항목</th>
                                    <th data-i18n-key="table_target">목표</th>
                                    <th data-i18n-key="table_actual">실제</th>
                                    <th data-i18n-key="table_difference">차액</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td data-i18n-key="category_needs">필수 지출</td>
                                    <td id="rule-needs-target">$0.00</td>
                                    <td id="rule-needs-actual">$0.00</td>
                                    <td id="rule-needs-diff">$0.00</td>
                                </tr>
                                <tr>
                                    <td data-i18n-key="category_wants">선택 지출</td>
                                    <td id="rule-wants-target">$0.00</td>
                                    <td id="rule-wants-actual">$0.00</td>
                                    <td id="rule-wants-diff">$0.00</td>
                                </tr>
                                <tr>
                                    <td data-i18n-key="category_savings">저축</td>
                                    <td id="rule-savings-target">$0.00</td>
                                    <td id="rule-savings-actual">$0.00</td>
                                    <td id="rule-savings-diff">$0.00</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </section>
                
                <section class="budget-section">
                    <h2 data-i18n-key="section_data_title">데이터 관리</h2>
                    <div class="data-actions">
                        <button id="export-json-btn" class="btn"><i class="ri-download-2-line"></i> <span data-i18n-key="btn_export"></span></button>
                        <button id="import-json-btn" class="btn"><i class="ri-upload-2-line"></i> <span data-i18n-key="btn_import"></span></button>
                        <input type="file" id="import-json-input" accept="application/json" hidden>
                        <button id="clear-all-data-btn" class="btn btn-danger"><i class="ri-delete-bin-line"></i> <span data-i18n-key="btn_clear_all_data"></span></button>
                    </div>
                </section>
            </div>
        </div>

        <section class="budget-section">
             <h2 data-i18n-key="section_charts_title">시각화 차트</h2>
             <div class="charts-grid">
                <div class="chart-container"><canvas id="budget-distribution-chart"></canvas><div class="chart-placeholder"></div></div>
                <div class="chart-container"><canvas id="expenses-chart"></canvas><div class="chart-placeholder"></div></div>
                <div class="chart-container"><canvas id="tax-chart"></canvas><div class="chart-placeholder"></div></div>
                <div class="chart-container"><canvas id="pre-tax-deduct-chart"></canvas><div class="chart-placeholder"></div></div>
                <div class="chart-container"><canvas id="post-tax-deduct-chart"></canvas><div class="chart-placeholder"></div></div>
             </div>
        </section>
    </div>
</body>
<script src="../sciprts/chart.js"></script>
<script src="../scripts/budget.js"></script>
</html>
